on:
  workflow_dispatch:
    inputs:
      compared-config-ref:
        type: string
        required: false
jobs:
  config-at-end:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/setup-python@v4

      - run: |
          set +e
          MY_PATH=${{ inputs.compared-config-ref }}
          pip install model-config-tests==0.0.1
          model-config-tests -s -m "checksum" \
            --output-path /opt/something \
            --junitxml=/opt/something/else/test-report.xml \
            ${{ inputs.compared-config-ref != '' && '--checksum-path $MY_PATH' || '' }}

          echo Wow!

  config-at-middle:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/setup-python@v4

      - run: |
          set +e
          MY_PATH=${{ inputs.compared-config-ref }}
          pip install model-config-tests==0.0.1
          model-config-tests -s -m "checksum" \
            --output-path /opt/something \
            ${{ inputs.compared-config-ref != '' && '--checksum-path $MY_PATH \' || '\' }}
            --junitxml=/opt/something/else/test-report.xml

          echo Wow!
