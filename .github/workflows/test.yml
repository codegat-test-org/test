name: Test updating commit status
on:
  workflow_dispatch:
jobs:
  test:
    name: test
    runs-on: ubuntu-latest
    permissions:
      statuses: write
    steps:
      - name: Commit Status Pending
        uses: myrotvorets/set-commit-status-action@3730c0a348a2ace3c110851bed53331bc6406e9f  # v2.0.1
        with:
          sha: dc07b2574ba38bc12632ef518b458a99b9991b5a
          description: Prerelease Deployment for X

      - run: sleep 10

      - name: Commit Status Failed
        uses: myrotvorets/set-commit-status-action@3730c0a348a2ace3c110851bed53331bc6406e9f  # v2.0.1
        with:
          sha: dc07b2574ba38bc12632ef518b458a99b9991b5a
          status: failure
          description: Prerelease Deployment for X