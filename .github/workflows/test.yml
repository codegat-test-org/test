on:
  pull_request:
jobs:
  test:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Comment
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GH_REPO: ${{ github.repository }}
          PKG: 1.2.3
          CFG: 3.2.1
          BODY: |
            This ${{ github.repository }} model will be deployed using:
            * `spack packages` [`${{ env.PKG }}`](https://github.com/ACCESS-NRI/spack-packages/releases/tag/${{ env.PKG }})
            * `spack-config` [`${{ env.CFG }}`](https://github.com/ACCESS-NRI/spack-config/releases/tag/${{ env.CFG }})
            If this is not what was expected, commit changes to `config/versions.json`.
        run: gh pr comment --edit-last --body '${{ env.BODY }}'