name: Test Workflow
on:
  workflow_call:
    inputs:
      additional-artifact-content-paths:
        type: string
        required: false
jobs:
  rsync:
    name: Rsync
    runs-on: ubuntu-latest
    env:
      TEST_OUTPUT_LOCAL_LOCATION: /opt/test-output
    steps:
      - name: Setup SSH
        id: ssh
        uses: access-nri/actions/.github/actions/setup-ssh@main
        with:
          hosts: |
            ${{ secrets.HOST }}
            ${{ secrets.HOST_DATA }}
          private-key: ${{ secrets.KEY }}

      - name: rsync
        run: |
          while IFS= read -r content_path; do
            echo "Going to rsync ${{ vars.ROOT_DIR }}/$content_path to ${{ env.TEST_OUTPUT_LOCAL_LOCATION }}"
          done <<< "${{ inputs.additional-artifact-content-paths }}"
